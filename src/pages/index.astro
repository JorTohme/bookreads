---
import Layout from '../layouts/Layout.astro'
import Header from '../components/Header.astro'
import Footer from '../components/Footer.astro'
import IndexNavbar from '../components/IndexNavbar.astro'
import Books from '../components/Books.astro'

const response = await fetch('https://bookreads-api-production.jortohme.workers.dev/bestsellers')
const data = await response.json()

const response2 = await fetch('https://bookreads-api-production.jortohme.workers.dev/bestsellersSpanish')
const data2 = await response2.json()

const today = Object.keys(data)[Object.keys(data).length - 1].replace(/-/g, '/')
---

<Layout title="Welcome to Astro.">
	
	<Header />

	<div class="flex justify-center">
		<div class="flex max-w-7xl w-3/4 gap-2">
			
			<IndexNavbar />

			<main class="w-9/12 py-5 text-center flex flex-col gap-2">
				<div class="py-14 shadow-md bg-white">
					<h1 class="text-3xl font-extrabold md:text-5xl">Bienvenido a <span class="text-gradient">Bookreads</span></h1>
					<p class="text-xl">
						Mira el top diario de libros vendidos en <a href="https://www.bookdepository.com/es/" target="_blank" class="text-blue-500">Bookdepository</a>.<br />
					</p>
				</div>

				<div class="px-2 py-1 h-fit shadow-md bg-white text-left ">
					<p class="text-xl font-semibold">Bestsellers</p>
					<div class="scrollx py-2 overflow-x-scroll">

						<Books data={data} />

					</div>
				</div>

				<div class="px-2 py-1 h-fit shadow-md bg-white text-left ">
					<p class="text-xl font-semibold">Bestsellers en espa√±ol</p>
					<div class="scrollx py-2 overflow-x-scroll">
						
						<Books data={data2} />

					</div>
				</div>	

			</main>
		</div>
	</div>
	
	<Footer />
</Layout>

<style>
	.border {
		border: 1px solid #000;
		border-collapse: collapse;
	}

	.text-gradient {
		background-image: var(--accent-gradient);
		-webkit-background-clip: text;
		-webkit-text-fill-color: transparent;
		background-size: 300%;
		background-position: 0%;
	}
</style>
